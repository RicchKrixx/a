<!DOCTYPE html>  <html lang="en">  
<head>  
  <meta charset="UTF-8" />  
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>  
  <title>BizMAX Dashboard</title>  
  <style>  
    body {  
      margin: 0;  
      font-family: Arial, sans-serif;  
      background: #0f172a;  
      color: white;  
    }  .dashboard {  
  display: flex;  
  flex-direction: column;  
  align-items: center;  
  padding: 20px;  
  max-width: 800px;  
  margin: 0 auto;  
}  

.profile {  
  display: flex;  
  flex-direction: column;  
  align-items: center;  
  gap: 10px;  
  margin-bottom: 30px;  
}  

.profile-img {  
  width: 80px;  
  height: 80px;  
  border-radius: 50%;  
  background: url('https://i.postimg.cc/tgBdHrrz/default-pfp.png') no-repeat center/cover;  
  position: relative;  
  border: 3px solid cyan;  
}  

.verified-badge {  
  position: absolute;  
  bottom: 2px;  
  right: 2px;  
  background: blue;  
  color: white;  
  font-size: 12px;  
  border-radius: 50%;  
  padding: 2px 6px;  
}  

.user-info {  
  display: flex;  
  flex-direction: column;  
  align-items: center;  
  text-align: center;  
}  

.user-info #user-name {  
  font-size: 18px;  
  font-weight: bold;  
}  

.orders {  
  background: rgba(255, 255, 255, 0.05);  
  border-left: 4px solid cyan;  
  padding: 20px;  
  border-radius: 12px;  
  box-shadow: 0 0 10px cyan;  
  margin-bottom: 20px;  
  width: 100%;  
}  

.orders h2 {  
  margin-top: 0;  
  font-size: 20px;  
  border-bottom: 1px solid #333;  
  padding-bottom: 5px;  
}  

.order {  
  margin-bottom: 10px;  
  border-bottom: 1px solid #333;  
  padding-bottom: 8px;  
}  

.btns {  
  display: flex;  
  flex-wrap: wrap;  
  gap: 10px;  
  justify-content: center;  
  width: 100%;  
}  

.btns button {  
  flex: 1 1 120px;  
  padding: 10px 20px;  
  border: none;  
  border-radius: 8px;  
  background: cyan;  
  color: #000;  
  font-weight: bold;  
  cursor: pointer;  
  box-shadow: 0 0 10px cyan;  
  transition: background 0.3s;  
}  

.btns button:hover {  
  background: white;  
}  

@media (max-width: 500px) {  
  .orders {  
    padding: 15px;  
  }  

  .user-info #user-name {  
    font-size: 16px;  
  }  

  .btns button {  
    flex: 1 1 100%;  
  }  
}

  </style>  
</head>  
<body>  <div class="dashboard">  
  <div class="profile">  
    <div class="profile-img">  
<div class="profile-container" style="position: relative;">
  <img id="profileImage" src="https://i.imgur.com/6VBx3io.png" alt="Profile" style="width: 40px; height: 40px; border-radius: 50%; cursor: pointer;">
  
  <div id="dropdownMenu" style="display: none; position: absolute; top: 50px; right: 0; background: #fff; border-radius: 10px; box-shadow: 0 0 10px rgba(0,0,0,0.2); z-index: 999;">
    <label style="padding: 10px; display: block; cursor: pointer;">
      Upload New
      <input type="file" accept="image/*" id="uploadImage" style="display: none;">
    </label>
    <div id="deleteImage" style="padding: 10px; cursor: pointer;">Delete</div>
  </div>
</div>
      <div class="verified-badge">‚úî</div>  
    </div>  
    <div class="user-info">  
      <div id="user-name">Loading...</div>  
      <small id="user-email"></small>  
    </div>  
  </div>    <div class="orders" id="orders">  
    <h2>Order History</h2>  
    <div id="order-list">Loading orders...</div>  
  </div>    <div class="btns">  
    <button onclick="window.location.href='BixMax home.html'">üè† Go Home</button>  
    <button onclick="logout()">üö™ Logout</button>  
  </div>  
</div>  <!-- Firebase -->  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>  <script>  
  const firebaseConfig = {  
    apiKey: "AIzaSyB0BBzQzGX6MHVSjn09VSD-JGpSwOu8EqQ",  
    authDomain: "bixmax-6c24c.firebaseapp.com",  
    projectId: "bixmax-6c24c",  
    storageBucket: "bixmax-6c24c.appspot.com",  
    messagingSenderId: "37740442541",  
    appId: "1:37740442541:web:a2e2b9bb81c6a8e76c6724"  
  };  
  
  firebase.initializeApp(firebaseConfig);  
  
  firebase.auth().onAuthStateChanged(user => {  
    if (user) {  
  
      const name = user.displayName || user.email.split('@')[0];  
      document.getElementById("user-name").textContent = name;  
      document.getElementById("user-email").textContent = user.email;  
      loadOrders(user.email);  
    } else {  
      window.location.href = "auth.html";  
    }  
  });  
  
  function logout() {  
    firebase.auth().signOut().then(() => {  
      window.location.href = "auth.html";  
    });  
  }  
  
  function loadOrders(email) {  
    const orderList = document.getElementById("order-list");  
    fetch("https://sheetdb.io/api/v1/oxl1mxxewqbdg")  
      .then(res => res.json())  
      .then(data => {  
        const userOrders = data.filter(order => order.email === email);  
        if (userOrders.length === 0) {  
          orderList.innerHTML = "<p>No orders found</p>";  
          return;  
        }  
        orderList.innerHTML = userOrders.map(order => `  
          <div class="order">  
            <strong>ID:</strong> ${order.id}<br>  
            <strong>Item:</strong> ${order.items}<br>  
            <strong>Total:</strong> GH‚Çµ${order.total}<br>  
            <small>${order.date || ''}</small>  
          </div>  
        `).join('');  
      })  
      .catch(() => {  
        orderList.innerHTML = "<p>Failed to load orders</p>";  
      });  
  }  
</script> 
<script>
  const profileImage = document.getElementById("profileImage");
  const dropdownMenu = document.getElementById("dropdownMenu");
  const uploadInput = document.getElementById("uploadImage");
  const deleteImage = document.getElementById("deleteImage");

  // Load saved image from localStorage
  const savedImg = localStorage.getItem("profileImage");
  if (savedImg) profileImage.src = savedImg;

  // Toggle dropdown menu
  profileImage.addEventListener("click", (e) => {
    e.stopPropagation();
    dropdownMenu.style.display = dropdownMenu.style.display === "block" ? "none" : "block";
  });

  // Upload new image
  uploadInput.addEventListener("change", (e) => {
    const file = e.target.files[0];
    if (!file) return;
    const reader = new FileReader();
    reader.onload = () => {
      profileImage.src = reader.result;
      localStorage.setItem("profileImage", reader.result);
      dropdownMenu.style.display = "none";
    };
    reader.readAsDataURL(file);
  });

  // Delete image
  deleteImage.addEventListener("click", () => {
    localStorage.removeItem("profileImage");
    profileImage.src = "https://i.imgur.com/6VBx3io.png"; // Default image
    dropdownMenu.style.display = "none";
  });

  // Hide dropdown on outside click
  document.addEventListener("click", () => {
    dropdownMenu.style.display = "none";
  });
</script>
 </body>  
</html>