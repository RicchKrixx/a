<!DOCTYPE html>
<html>
<head>
  <title>Notification Test | BixMAX</title>
</head>
<body style="background:#e8f4ff; font-family:sans-serif; text-align:center; padding:50px;">

  <h2>ðŸ”” BixMAX Notification Test</h2>
  <button id="notifyBtn" style="padding:15px 25px; font-size:16px;">Test Notification</button>

  <script>
    // Register service worker
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('sw.js')
        .then(function(reg) {
          console.log("Service Worker registered:", reg.scope);
        })
        .catch(function(err) {
          console.error("Service Worker registration failed:", err);
        });
    }

    // Ask permission on load
    Notification.requestPermission().then(function(permission) {
      console.log("Permission:", permission);
    });

    // Trigger test notification
    document.getElementById('notifyBtn').addEventListener('click', function () {
      if (Notification.permission === 'granted') {
        navigator.serviceWorker.getRegistration().then(function(reg) {
          if (reg) {
            reg.showNotification("Hello from BixMAX ðŸ‘‹", {
              body: "Youâ€™re now subscribed to updates!",
              icon: 'https://bixmax.store/logo.png',
              badge: 'https://bixmax.store/icon.png'
            });
          }
        });
      } else {
        alert("Please allow notifications first.");
      }
    });
  </script>
</body>
</html>