<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>3D Infinite Category Carousel</title>
<style>
body {
  background: #111;
  color: white;
  font-family: system-ui, sans-serif;
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100vh;
  overflow: hidden;
}

/* Category Carousel */
.category-grid {
  display: flex;
  gap: 20px;
  overflow-x: scroll;
  scroll-behavior: smooth;
  padding: 40px 0;
  -webkit-overflow-scrolling: touch;
  position: relative;
  width: 90%;
}

.category-grid::-webkit-scrollbar { display: none; }

.cat-menu {
  flex: 0 0 auto;
  width: 120px;
  height: 120px;
  border-radius: 16px;
  overflow: hidden;
  position: relative;
  transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.cat-menu img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  border-radius: 16px;
}

.category {
  position: absolute;
  bottom: 0;
  width: 100%;
  padding: 6px 0;
  background: rgba(0, 0, 0, 0.6);
  color: white;
  font-size: 0.8rem;
  text-align: center;
  border-bottom-left-radius: 16px;
  border-bottom-right-radius: 16px;
}
</style>
</head>
<body>

<div class="category-grid">
  <a class="cat-menu" href="#"><img src="https://i.postimg.cc/1XrW4Mkt/th.webp"><div class="category">Electronics</div></a>
  <a class="cat-menu" href="#"><img src="https://i.postimg.cc/ZRc3dgq5/th-2.webp"><div class="category">Fashion</div></a>
  <a class="cat-menu" href="#"><img src="https://i.postimg.cc/15gnm4Dm/th-3.webp"><div class="category">Groceries</div></a>
  <a class="cat-menu" href="#"><img src="https://i.postimg.cc/zfhFV0Wr/th-1.webp"><div class="category">Home</div></a>
  <a class="cat-menu" href="#"><img src="https://i.postimg.cc/gJSjdPJr/OIP.webp"><div class="category">Health</div></a>
  <a class="cat-menu" href="#"><img src="https://i.postimg.cc/8zQ5T41W/download.webp"><div class="category">Beauty</div></a>
</div>

<script>
const grid = document.querySelector('.category-grid');
const items = Array.from(grid.children);

// duplicate items to make infinite scroll illusion
items.forEach(i => grid.appendChild(i.cloneNode(true)));
items.forEach(i => grid.appendChild(i.cloneNode(true)));

let isDown = false;
let startX, scrollLeft;

// drag to scroll
grid.addEventListener('mousedown', e => {
  isDown = true;
  startX = e.pageX - grid.offsetLeft;
  scrollLeft = grid.scrollLeft;
});
grid.addEventListener('mouseleave', () => isDown = false);
grid.addEventListener('mouseup', () => isDown = false);
grid.addEventListener('mousemove', e => {
  if (!isDown) return;
  e.preventDefault();
  const x = e.pageX - grid.offsetLeft;
  const walk = (x - startX) * 1.5;
  grid.scrollLeft = scrollLeft - walk;
});

// Infinite loop
function checkLoop() {
  const maxScroll = grid.scrollWidth / 3;
  if (grid.scrollLeft < maxScroll * 0.3) grid.scrollLeft += maxScroll;
  else if (grid.scrollLeft > maxScroll * 1.7) grid.scrollLeft -= maxScroll;
}

// Scaling logic
function updateScales() {
  const gridRect = grid.getBoundingClientRect();
  const center = gridRect.left + gridRect.width / 2;
  const cards = document.querySelectorAll('.cat-menu');

  cards.forEach(card => {
    const rect = card.getBoundingClientRect();
    const cardCenter = rect.left + rect.width / 2;
    const distance = Math.abs(center - cardCenter);
    const scale = Math.max(0.6, 1.6 - distance / 300); // closest = biggest
    card.style.transform = `scale(${scale})`;
    card.style.zIndex = Math.round(scale * 100);
    card.style.boxShadow = scale > 1.3 ? "0 0 15px cyan" : "none";
  });
}

grid.addEventListener('scroll', () => {
  updateScales();
  checkLoop();
});

window.addEventListener('load', () => {
  grid.scrollLeft = grid.scrollWidth / 3;
  updateScales();
});

// optional auto-scroll (infinite smooth loop)
setInterval(() => {
  grid.scrollLeft += 1.5;
}, 30);
</script>

</body>
</html>
